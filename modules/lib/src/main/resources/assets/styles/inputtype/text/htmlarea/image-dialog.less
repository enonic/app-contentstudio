@image-style-selector-height: 26px;
@track-color: @admin-dark-gray;
@thumb-color: @admin-blue;

@thumb-radius: 10px;
@thumb-height: 20px;
@thumb-width: 20px;

@track-width: 93%;
@track-height: 1px;
@track-border-width: 1px;
@track-border-color: @admin-dark-gray;

@track-radius: 5px;

.html-area-modal-dialog.image-modal-dialog {
  .hasSelectedItemPreview();

  .image-selector {
    .showsSelectedOption();

    margin-bottom: 0;

    &.invalid .preview-panel-scroll-navigation-wrapper {
      display: none;
    }

    .content-item-preview-panel {
      background-color: @admin-white;
      overflow-y: auto;
      overflow-x: hidden;

      .preview-frame {
        display: block;
        border: none;
        width: 100%;
      }

      > .progress-bar {
        display: none;
        width: auto;
      }

      &.upload {
        margin-top: 10px;

        > .error {
          width: 100%;
          margin-left: 0;
          text-align: center;
          color: @admin-white;
          font-weight: bold;
          background-color: @admin-input-red;
        }
      }

      > img {
        display: block;
      }
    }

    .input-wrapper {
      display: flex;

      .image-uploader-el {
        max-width: 37px !important;
        position: static;

        &.uploading {
          display: none;
        }

        .dropzone-container {
          position: static;
        }
      }
    }
  }

  .toolbar {
    &.image-toolbar {
      flex-direction: column;
      border-bottom: none;
      height: auto;
      margin-bottom: 10px;

      .image-toolbar-top-line {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;

        @media screen and (max-width: 720px) {
          flex-direction: column;
          align-items: flex-start;

          .alignment-container,
          .image-style-selector,
          .custom-width-checkbox {
            margin-bottom: 10px;
          }

          .image-style-selector {
            width: 100%;
          }
        }

        .alignment-container {
          display: flex;

          .@{_COMMON_PREFIX}button {
            padding: 0 7px;
            font-size: 18px;
            background-color: transparent;

            &::before {
              display: block;
            }

            &:not(.active) {
              &::before {
                color: @admin-font-gray2;
              }
            }

            &:first-child {
              padding-left: 0;
            }
          }
        }

        .custom-width-checkbox {
          display: inline-block;

          input {
            width: 0;
            height: 0;
            margin: 0;
          }

          label {
            vertical-align: top;
            display: inherit;
            float: none;
            padding-right: 0;
          }

          &.disabled {
            opacity: 0.6;
          }
        }

        .fold-button {
          bottom: 3px;
        }
      }

      .custom-width-range-container {
        width: 100%;

        .track() {
          width: @track-width;
          height: @track-height;
          cursor: pointer;
          animate: 0.2s;
        }

        .thumb() {
          height: @thumb-height;
          width: @thumb-width;
          border-radius: @thumb-radius;
          background: @thumb-color;
          cursor: pointer;
        }

        input[type=range] {
          -webkit-appearance: none;
          margin: @thumb-height/2 0;
          width: @track-width;
          padding-bottom: 2px;

          &:focus {
            outline: none;
            border: none;
          }

          &:hover {
            border: none;
          }

          &::-webkit-slider-runnable-track {
            .track();

            background: @track-color;
            border-radius: @track-radius;
            border-top: @track-border-width solid @track-border-color;
            border-bottom: @track-border-width solid @track-border-color;
          }

          &::-webkit-slider-thumb {
            .thumb();

            -webkit-appearance: none;
            margin-top: ((-@track-border-width * 2 + @track-height) / 2) - (@thumb-height / 2);
          }

          &::-moz-range-track {
            .track();

            background: @track-color;
            border-radius: @track-radius;
            border-top: @track-border-width solid @track-border-color;
            border-bottom: @track-border-width solid @track-border-color;
          }

          &::-moz-range-thumb {
            .thumb();
          }

          &::-ms-track {
            .track();

            background: transparent;
            border-color: transparent;
            border-width: @thumb-width 0;
            color: transparent;
          }

          &::-ms-fill-lower {
            border-top: @track-border-width solid @track-border-color;
            border-bottom: @track-border-width solid @track-border-color;
            border-radius: @track-radius*2;
          }

          &::-ms-fill-upper {
            background: @track-color;
            border-top: @track-border-width solid @track-border-color;
            border-bottom: @track-border-width solid @track-border-color;
            border-radius: @track-radius*2;
          }

          &::-ms-thumb {
            .thumb();
          }

          &:focus::-ms-fill-lower {
            background: @track-color;
          }
        }

        .custom-width-board {
          display: inline-block;
          width: 7%;
          text-align: right;
        }
      }
    }

    .image-style-selector {
      height: @image-style-selector-height;
      width: 220px;

      .option-filter-input {
        position: absolute;
        height: @image-style-selector-height;

        .placeholder(1em, normal);
      }

      .selected-option {
        height: @image-style-selector-height;
        min-height: @image-style-selector-height;
        position: absolute;
        padding: 4px 37px 4px 10px;

        .option-value {
          margin: 0;
          width: 100%;
        }
      }

      .options-container {
        .slick-cell {
          padding-bottom: 4px;
          padding-top: 4px;
        }
      }

      .@{_COMMON_PREFIX}names-view {
        .@{_COMMON_PREFIX}main-name {
          font-size: 12px;
        }
      }

      .selected-option:not([style*="display: none"]) + .dropdown-handle {
        top: 4px;
      }

      &.disabled {
        opacity: 0.5;
        pointer-events: none;
      }
    }
  }

  .form-view {
    padding: 0;

    .input-view {
      .@{_COMMON_PREFIX}combobox, .content-combo-box {
        .options-container {
          position: absolute !important;
          box-sizing: border-box;
        }
      }

      &.caption {
        margin: 15px 0;
      }

      &.image-accessibility {
        .image-accessibility-radio {
          box-sizing: border-box;
          padding-right: 0;

          .alt-text {
            margin-left: 23px;
            width: calc(100% - 23px);

            &:disabled {
              opacity: 0.5;
            }
          }
        }
        .validation-viewer {
          margin-top: 10px;
        }
      }
    }

    @-moz-document url-prefix() { // FF Issue with fieldset width, fix for XP-4975
      fieldset {
        display: table-cell;
      }
    }
  }

  .modal-dialog-footer {
    .form-view {
      fieldset:not(:last-child) {
        margin-bottom: 0;
      }

      fieldset:not(:first-child) {
        margin-top: 0;
      }
    }
  }

  img {
    &[style*="text-align: justify"] {
      &:not([data-src*="keepSize=true"]) {
        width: 100%;
      }
    }

    &[style*="text-align: left"] {
      margin: 0;
      float: left;

      &:not([data-src*="keepSize=true"]) {
        width: 40%;
      }
    }

    &[style*="text-align: center"] {
      margin: auto;

      &:not([data-src*="keepSize=true"]) {
        width: 60%;
      }
    }

    &[style*="text-align: right"] {
      margin: 0;
      float: right;

      &:not([data-src*="keepSize=true"]) {
        width: 40%;
      }
    }
  }

  > .dropzone-container {
    .dialog-dropzone-container(120px);

    .dropzone {
      font-size: 18px;
    }
  }
}
