@image-style-selector-height: 30px;
@track-color: @admin-dark-gray;
@thumb-color: @admin-blue;

@thumb-radius: 10px;
@thumb-height: 20px;
@thumb-width: 20px;

@track-width: 93%;
@track-height: 1px;
@track-border-width: 1px;
@track-border-color: @admin-dark-gray;

@track-radius: 5px;

.html-area-modal-dialog.image-modal-dialog {
  .hasSelectedItemPreview();

  .image-selector {
    .showsSelectedOption();

    margin-bottom: 0;

    &.invalid .preview-panel-scroll-navigation-wrapper {
      display: none;
    }

    .content-item-preview-panel {
      background-color: @admin-white;
      overflow-y: auto;
      overflow-x: hidden;

      .preview-frame {
        display: block;
        border: none;
        width: 100%;
      }

      > .progress-bar {
        display: none;
        width: auto;
      }

      &.upload {
        margin-top: 10px;

        > .error {
          width: 100%;
          margin-left: 0;
          text-align: center;
          color: @admin-white;
          font-weight: bold;
          background-color: @admin-input-red;
        }
      }

      > img {
        display: block;
      }
    }

    .input-wrapper {
      display: flex;

      .image-uploader-el {
        &.uploading {
          display: none;
        }

        .dropzone-container {
          position: static;
        }
      }
    }
  }

  .image-toolbar {
    height: auto;
    padding: 0 5px;
    margin-bottom: 10px;
    flex-wrap: wrap;

    .alignment-container,
    .image-style-selector,
    .custom-width-checkbox {
      margin: 5px;
      box-sizing: border-box;
    }

    .alignment-container {
      display: flex;
      flex: 0 0 calc(25% - 10px);

      .@{_COMMON_PREFIX}button {
        padding: 6px;

        &::before {
          display: block;
        }

        &:not(.active) {
          &::before {
            color: @admin-font-gray2;
          }
        }
      }
    }

    .custom-width-checkbox {
      flex: 1 1 calc(30% - 10px); /* 33.33% width minus some space for gap */
      justify-content: end;

      &.disabled {
        opacity: 0.6;
      }
    }

    .fold-button {
      bottom: 3px;
    }

    .custom-width-range-container {
      flex: 1 1 100%;
      height: @image-style-selector-height;
      display: flex;
      align-items: center;

      .track() {
        width: @track-width;
        height: @track-height;
        cursor: pointer;
        animate: 0.2s;
      }

      .thumb() {
        height: @thumb-height;
        width: @thumb-width;
        border-radius: @thumb-radius;
        background: @thumb-color;
        cursor: pointer;
      }

      input[type=range] {
        -webkit-appearance: none;
        margin: @thumb-height/2 0;
        width: @track-width;
        padding-bottom: 2px;

        &:focus {
          outline: none;
          border: none;
        }

        &:hover {
          border: none;
        }

        &::-webkit-slider-runnable-track {
          .track();

          background: @track-color;
          border-radius: @track-radius;
          border-top: @track-border-width solid @track-border-color;
          border-bottom: @track-border-width solid @track-border-color;
        }

        &::-webkit-slider-thumb {
          .thumb();

          -webkit-appearance: none;
          margin-top: ((-@track-border-width * 2 + @track-height) / 2) - (@thumb-height / 2);
        }

        &::-moz-range-track {
          .track();

          background: @track-color;
          border-radius: @track-radius;
          border-top: @track-border-width solid @track-border-color;
          border-bottom: @track-border-width solid @track-border-color;
        }

        &::-moz-range-thumb {
          .thumb();
        }

        &::-ms-track {
          .track();

          background: transparent;
          border-color: transparent;
          border-width: @thumb-width 0;
          color: transparent;
        }

        &::-ms-fill-lower {
          border-top: @track-border-width solid @track-border-color;
          border-bottom: @track-border-width solid @track-border-color;
          border-radius: @track-radius*2;
        }

        &::-ms-fill-upper {
          background: @track-color;
          border-top: @track-border-width solid @track-border-color;
          border-bottom: @track-border-width solid @track-border-color;
          border-radius: @track-radius*2;
        }

        &::-ms-thumb {
          .thumb();
        }

        &:focus::-ms-fill-lower {
          background: @track-color;
        }
      }

      .custom-width-board {
        width: 7%;
        text-align: right;
      }
    }

    .image-style-selector {
      flex: 1 1 calc(40% - 10px);

      .option-filter-input {
        .placeholder(1em, normal);
        height: @image-style-selector-height - 2;
      }

      .@{_COMMON_PREFIX}dropdown-handle {
        width: @image-style-selector-height - 2;
        height: @image-style-selector-height - 2;
      }

      .selected-option {
        padding: 4px;
        padding-left: 8px;

        .option-value {
          margin: 0;
          width: 100%;
        }
      }

      .options-container {
        .slick-cell {
          padding-bottom: 4px;
          padding-top: 4px;
        }
      }

      .@{_COMMON_PREFIX}names-view {
        .@{_COMMON_PREFIX}main-name {
          font-size: 12px;
        }
      }

      &.disabled {
        opacity: 0.5;
        pointer-events: none;
      }
    }
  }

  .form-view {
    padding: 0;

    .input-view {
      .@{_COMMON_PREFIX}combobox, .content-combo-box {
        .options-container {
          position: absolute !important;
          box-sizing: border-box;
        }
      }

      &.caption {
        margin: 15px 0;
      }

      &.image-accessibility {
        .image-accessibility-radio {
          box-sizing: border-box;
          padding-right: 0;

          .alt-text {
            margin-left: 23px;
            width: calc(100% - 23px);

            &:disabled {
              opacity: 0.5;
            }
          }
        }
        .validation-viewer {
          margin-top: 10px;
        }
      }
    }

    @-moz-document url-prefix() { // FF Issue with fieldset width, fix for XP-4975
      fieldset {
        display: table-cell;
      }
    }
  }

  .modal-dialog-footer {
    .form-view {
      fieldset:not(:last-child) {
        margin-bottom: 0;
      }

      fieldset:not(:first-child) {
        margin-top: 0;
      }
    }
  }

  img {
    &[style*="text-align: justify"] {
      &:not([data-src*="keepSize=true"]) {
        width: 100%;
      }
    }

    &[style*="text-align: left"] {
      margin: 0;
      float: left;

      &:not([data-src*="keepSize=true"]) {
        width: 40%;
      }
    }

    &[style*="text-align: center"] {
      margin: auto;

      &:not([data-src*="keepSize=true"]) {
        width: 60%;
      }
    }

    &[style*="text-align: right"] {
      margin: 0;
      float: right;

      &:not([data-src*="keepSize=true"]) {
        width: 40%;
      }
    }
  }

  > .dropzone-container {
    .dialog-dropzone-container(120px);

    .dropzone {
      font-size: 18px;
    }
  }
}
