.content-wizard-panel {

  .help-text-toggler {
    display: none;
  }

  .thumbnail-uploader-el {
    &.status-hidden .result-container .workflow-status {
      display: none;
    }

    &:not(.icon-variant).has-origin-project .result-container {
      .icon-inherited(12px, 13px);

      &::before {
        position: absolute;
        top: 50px;
        left: -6px;
        padding-left: 3px;
      }
    }

    &.icon-variant {
      .icon-variant(14px);

      &::before {
        position: absolute;
        bottom: -8px;
        left: -8px;
      }

      &.has-origin-project {
        .icon-variant(14px, @color: @admin-white, @bg-color: @admin-button-blue1, @border-color: transparent);
      }

      &::before,
      &.has-origin-project::before {
        padding-left: 3px;
        width: 15px;
      }

      &.has-origin-project::before {
        border: none;
      }
    }
  }

  .mobile-mode {
    .split-panel.wizard-and-preview {
      &.toggle-live {
        .live-form-panel {
          z-index: 1;
          width: 100% !important;
        }
      }

      .splitter {
        display: none !important;
      }
    }

    &.context-split-panel.expanded {
      .context-panel {
        width: 100% !important;
      }
    }
  }

  .wizard-header {
    .path-error {
      color: @admin-level-3;
      display: none;
      margin: 0 5px;
    }

    .wizard-header-top-row {
      .ai-helper-mask {
        background-color: @admin-bg-light-gray; // enforce background color
      }
    }

    .wizard-header-bottom-row {
      .icon-spinner {
        .animation(rotate360, 0.5s, 0s, linear);
      }
    }

    &.path-exists {
      .wizard-header-bottom-row {
        .path-error {
          display: inline-block;
        }

        input {
          border: 1px solid @admin-input-red;
          box-shadow: 0 0 3px 1px darken(@admin-input-red, 10%);
        }
      }
    }

    &.locked {
      .wizard-header-bottom-row {
        .path{
          ~ * {
            display: none !important;
          }

          &:hover {
            cursor: pointer;
          }
        }
      }
    }
  }

  .form-panel {
    &._0-240,
    &._240-360,
    &._360-540 {
      .thumbnail-uploader-el {
        .dropzone-container .dropzone {
          min-height: auto;
        }

        &:not(.icon-variant).has-origin-project .result-container {
          .icon-inherited(8px, 9px);

          &::before {
            top: 20px;
            left: -4px;
            padding-left: 3px;
          }
        }

        &.icon-variant {
          .icon-variant(8px);

          &.has-origin-project {
            .icon-variant(8px, @color: @admin-white, @bg-color: @admin-button-blue1, @border-color: transparent);
          }

          &::before,
          &.has-origin-project::before {
            padding-left: 3px;
            width: 9px;
          }

          &.has-origin-project::before {
            border: none;
          }
        }

        .result-container {
          .workflow-status {
            font-size: 14px;
            top: 2px;
          }
        }
      }
    }

    .wizard-steps-panel {
      .wizard-step-form:last-of-type {
        height: auto !important;
      }
    }
  }

  &:not(.rendered) {
    .content-wizard-toolbar {
      .cycle-button, .toggle-button.icon-clipboard, .toggle-button.icon-cog {
        display: none;
      }

      .details-toggle {
        margin-left: auto;
      }
    }
  }

  .wizard-step-deck-panel {
    .form-view {
      margin-top: 0;
    }
  }

  &._0-240, &._240-360, &._360-540, &._540-720, &._720-960 {
    .splitter {
      display: none;
    }
  }

  .wizard-step-navigator-and-toolbar {
    .help-text-button {
      order: 1;
      min-width: 22px;
      padding: 0 10px;
      margin: 0;
    }

    .fold-button,
    .wizard-step-navigator {
      order: 2;
    }

    .minimize-edit {
      order: 4;
    }

    &:not(.folded) {
      .tab-bar-item.step-icon {
        &.icon-masks:before {
          font-size: 20px;
        }

        &.x-data-anchor {
          padding-bottom: 0;

          &:not(.all-collapsed) {
            padding-left: 20px;
            padding-right: 0;
          }
        }
      }
    }

    &.folded {
      .tab-bar-item.step-icon {
        &.x-data-anchor {
          padding-left: 2px;

          .label {
            display: inline-block;
            padding-left: 4px;
          }

          &::before {
            display: inline-block;
            font-size: 15px;
            font-weight: bold;
          }
        }
      }
    }
  }

  .split-panel.wizard-and-preview {
    &.toggle-form {
      .form-panel {
        width: 100% !important;
      }
    }

    &.toggle-live {
      .context-split-panel {
        width: 100% !important;
        z-index: 1;

        .live-form-panel {
          width: 100% !important;
        }

        & > .splitter, .form-panel {
          display: none !important;
        }

        .hide-mobile-preview-button {
          display: none;
        }
      }
    }

    &.toggle-split {
      &._0-240,
      &._240-360,
      &._360-540,
      &._540-720 {
        .form-panel {
          width: 100% !important;
        }

        & > .splitter, .live-form-panel {
          display: none !important;
        }
      }
    }

    .form-panel {
      .panel-strip-panel-header {
        &.step-icon.icon-masks::before {
          font-size: 18px;
        }
      }

      &.minimized {
        background-color: @admin-bg-toolbar;

        .thumbnail-uploader-el,
        .wizard-header,
        .wizard-steps-panel {
          display: none;
        }

        .wizard-step-navigator-and-toolbar {
          padding-top: 50px;
          padding-left: 40px;
          box-sizing: border-box;
          overflow: initial;

          .fold-button {
            margin-left: -40px;

            .fold-label {
              position: absolute;
              width: 120px;
              padding: 0 20px;
              box-sizing: border-box;
              transform: rotate(90deg);
              transform-origin: 15px 0;
            }

            .@{_COMMON_PREFIX}dropdown {
              position: fixed;
              top: 125px;
              left: 35px;
              margin: 0;

              .wizard-step-navigator {
                transform: initial;
              }
            }

            &::after {
              margin: 80px 5px 0 0;
              box-sizing: border-box;
              border-top: none;
              border-left: 6px solid @admin-dark-gray;
              border-right: 6px solid transparent;
              border-bottom: 4px solid transparent;
              border-top: 4px solid transparent;
            }
          }

          &::before {
            content: " ";
            position: absolute;
            width: 100%;
            height: 100%;
            background: @admin-bg-light-gray;
          }
        }

        .wizard-step-navigator {
          margin-top: 35px;
          box-sizing: border-box;
          transform: rotate(90deg);
          transform-origin: 0 0;

          .tab-bar-item {
            line-height: 18px;
          }
        }

        .minimize-edit {
          font-weight: bold;
          position: absolute;
          left: 5px;
          top: 5px;
        }
      }

      &:not(.minimized) {
        .wizard-step-navigator-and-toolbar {
          &:not(.folded) {
            &:not(.scroll-stick) {
              width: auto !important;
            }
          }
        }
      }
    }
  }

  .minimize-edit {
    display: none;
    min-width: 30px;
    margin: 0 0 0 auto;
    font-size: 30px;
    font-weight: 800;
    text-align: center;
    line-height: 40px;
    overflow: hidden;
    cursor: pointer;

    &::before {
      color: @admin-dark-gray;
    }

    &:hover::before {
      color: @admin-black;
    }
  }

  .content-wizard-context-split-panel {
    .splitter, .context-panel {
      z-index: @z-index-toolbar-element + 1;
    }
  }

  .context-panel {
    overflow: visible;
    height: calc(100vh - @app-header-height);

   // .widget-selection-row(@height: @app-header-height);

    .non-mobile-details-panel-toggle-button {
      top: 0;
      border: none;
      height: @app-header-height - 1;
      width: @app-header-height - 1;
      padding-left: 10px;

      &::before {
        line-height: @app-header-height - 1;
      }
    }

    &.mobile {
      width: auto;
      height: auto;
      right: 0;
      left: 0;
      display: block;
      margin-top: @app-header-height; // leave space for the wizard toolbar
      top: 3000px; // hide by default;
    }
  }

  .split-panel.floating .context-panel {
    top: 0;
  }

  &._0-240,
  &._240-360,
  &._360-540,
  &._540-720 {
    .mobile-edit-publish-button {
      .button(@form-button-font, @admin-green, @form-button-font, lighten(@admin-green, 30%));
    }

    .mobile-edit-mark-as-ready-button {
      .button(@form-button-font, @admin-yellow, @form-button-font, lighten(@admin-yellow, 30%));
    }

    .mobile-edit-publish-button,
    .mobile-edit-mark-as-ready-button {
      display: flex !important;
      position: fixed;
      bottom: 0;
      text-align: center;
      height: 40px;
      width: 100%;
      opacity: 0.9;
      z-index: @z-index-docked-panel;
      justify-content: center;

      span {
        font-size: 16px;
      }
    }

    .mobile-edit-publish-controls {
      &:not(.enabled) {
        display: none;
      }

      &.mark-as-ready {
        .mobile-edit-publish-button {
          display: none !important;
        }
      }

      &:not(.mark-as-ready) {
        .mobile-edit-mark-as-ready-button {
          display: none !important;
        }
      }
    }

    .image-selector-toolbar-sticky {
      padding: 10px 15px;
      left: 0;
    }

    .toolbar-state-icon {
      &.ready,
      &.in-progress,
      &.invalid {
        & ~ .toolbar-publish-controls .content-wizard-toolbar-publish-button {
          border-left: none;
        }
      }
    }

    .toolbar-state-icon {
      &:not(.ready):not(.in-progress):not(.invalid) ~ .toolbar-publish-controls {
        margin-left: auto;
      }
    }

    &.rendered {
      .toolbar-publish-controls .content-wizard-toolbar-publish-button {
        border-right: 1px solid @admin-bg-light-gray;
      }
    }
  }

  &._720-960,
  &._960-1200,
  &._1200-1380,
  &._1380-1620,
  &._1620-1920,
  &._1920-Infinity {
    .mobile-edit-publish-controls {
      display: none;
    }

    .content-wizard-toolbar {
      .toolbar-publish-controls {
        .content-wizard-toolbar-publish-button {
          border-left: 1px solid @admin-bg-light-gray;
          border-right: 1px solid @admin-bg-light-gray;
        }
      }
    }
  }

  &.no-modify-permissions {
    .thumbnail-uploader-el, .wizard-header, .wizard-steps-panel {
      * {
        pointer-events: none;
      }
    }

    .selected-option {
      .remove, .edit {
        display: none;
      }
    }

    .form-panel {
      padding-bottom: 30px;
    }
  }

  .live-form-panel.rendering {
    opacity: 0;
  }
}

html[style*="z-index: 9995"] { // ckeditor fullscreen mode
  .wizard-step-navigator-and-toolbar {
    display: none;
  }

  .launcher-button {
    display: none;
  }
}
