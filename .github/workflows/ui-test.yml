name: Selenium Test

on:
    schedule:
        - cron:  '0 11,23 * * *'

jobs:
    selenium-test:
        continue-on-error: true
        strategy:
            fail-fast: false
            matrix:
                suite: [testContentStudioApp, testContentStudioProjects]

        runs-on: ubuntu-latest

        steps:
            -   uses: actions/checkout@v2

            -   name: Set up JDK 11
                uses: actions/setup-java@v2
                with:
                    java-version: 11
                    distribution: 'adopt'

            -   name: Run Selenium Tests
                run: ./gradlew :contentstudio:build :testing:${{ matrix.suite }}

            -   uses: actions/upload-artifact@v2
                with:
                    name: mochawesome-report-${{ matrix.suite }}
                    path: testing/mochawesome-report/
            -   uses: actions/upload-artifact@v2
                with:
                    name: screenshots-${{ matrix.suite }}
                    path: testing/build/screenshots/
