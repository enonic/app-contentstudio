apply plugin: 'com.github.node-gradle.node'

node {
    version = '22.18.0'
    download = true
}

afterEvaluate {
    if ( configurations.hasProperty( 'devResources' ) )
    {
        tasks.register('copyDevResources') {
            doLast {
                copy {
                    from configurations.devResources.files.collect { zipTree( it ) }
                    include 'dev/**'
                    into '.xp'
                }
            }
        }

        npmInstall.dependsOn copyDevResources
    }
}
